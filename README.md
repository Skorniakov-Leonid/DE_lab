# Лабораторная по дифференциальным уравнениям
### Условие (полное [ТЗ](https://docs.google.com/document/d/1jERHiZpNfQRM39Vfttc6WMjtQxCwhOESOvy6dOFZMjM/edit)):
- 1.1) Нахождение параметров линейного дифференциального однородного уравнения первого порядка с постоянными коэффициентами при известных значениях  y` в ряде точек.  



### Структура проекта:
[Solution](src/solution/solution.py) - класс хранящий решение ДУ, вычисляет n-ую производную в точке.  
[ODE](src/ode/ode.py) - класс хранящий ОДУ, генерирует решение по значению в точке (задача Коши).  
[Graph](src/graph/graph.py) - класс для хранения и визуализации набора данных, может быть сгенерирован из решения.  
[Solver](src/solve/solve.py) - класс для нахождения приближенного ОДУ по значениям в ряде точек и начальному условию.  
[Metric](src/checker/metric.py) - класс для получения метрик по решению и начальному набору данных.  
[Result](src/checker/result.py) - класс для хранения результатов эксперимента, хранит график и результаты метрик.  
[Checker](src/checker/checker.py) - класс для проведению экспериментов: генерации синтетических данных по решению, нахождения ОДУ с помощью Solver, сбора метрик и визуализации.

## Решатели
- [LSSolver](src/solve/solve.py) - решатель, использующий метод малых квадратов, вычисляющий решение путём решения ДУ.
- [LSSolverExp](src/solve/solve.py) - решатель, использующий метод малых квадратов, вычисляющий решение через его экспоненциальную форму.
- [AveragePowerSolver](src/solve/solve.py) - решатель, вычисляющий коэффициенты решения для каждой пары точек и находящий среднестепенное медианных значения.
- [Median](src/solve/solve.py) - решатель, вычисляющий коэффициенты решения для каждой пары точек и находящий медианное значение.

### Добавление решателей:  
Чтобы добавить решатель, необходимо имплементировать интерфейс Solver и экземпляр класса добавить в список solvers.  

Для данного решателя автоматически сгенерируется решение по входным данным вместе с графиком и метриками. 

## Метрики
- [MSE](src/checker/metric.py) - среднеквадратичная ошибка.
- [MAE](src/checker/metric.py) - средняя абсолютная ошибка.
- [HC](src/checker/metric.py) - критерий Хуберта.
- [RS](src/checker/metric.py) - коэффициент детерминации

### Добавление метрик:  
Чтобы добавить метрику, необходимо имплементировать интерфейс Metric и экземпляр класса добавить в список metrics. 

Для данной метрики автоматически сгенерируется график с результами для каждого решателя.

## Порядок эксперимента
Для проведения эксперимента необходимо определить решение ДУ по которому строятся синтетические данные, с которыми сравниваются получаемые решения.  

В данном варианте ДУ имеет формат: 
    
    y' + ay + b = 0

А решение выглядит так:  
        
    y = c * e ^ (-at) - b/a
    y' = -a * c * e ^ (-at)

Для того, чтобы однозначно построить график решения необходимы коэффициенты **a**, **b** и **c**.  
По ним строится набор точек __(t, y'(t))__ на диапазоне __t__ (по необходимости добавляется шум).  

Так как __y'__ не зависит от __b__, то чтобы его восстановить необходимо начальное услование __(t0, y(t0))__, которое генерируется автоматически для первого значения __t0__ сгенерированного набора точек.

После генерации набора точек, данный набор передаётся решателям, которые возращают приближенные ДУ.  
По данному ДУ и начальному условию строится решение, на основе которого строятся метрики.

Строятся графики решений и выводятся метрики.  
В консоли выводятся получившиеся коэффциенты каждого ДУ и значения метрик в числовом формате.

### Параметры
Эксперимент имеет несколько параметров:
- __solvers__ - лист решателей, для которых проводится эксперимент (по умолчанию лист __solvers__).
- __start__, __end__ - границы диапазона значений __t__, на котором генерируется набор точек.
- __noise__ - шум с которым генерируются значения для эксперимент.
- __steps__ - размер генерируемого набора точек. 

Все параметры передаются в методе __check__ класса __Checker__ (в этом же классе указаны значения по умолчанию).


### Запуск
Чтобы сгенерировать экперимент необходимо создать класс [Checker](src/checker/checker.py), в него необходимо передать решение ДУ. Например, [SolutionLC1](src/solution/solution.py) (решение линейного ОДУ первого порядка с постоянным коэффициентами) по трём коэффициентам.  

Чтобы начать экперимент необходимо запустить метод __check__, принимающий лист решателей  и шум.

Когда экперимент закончится, построятся графики решений и метрик, выведутся данные в консоль.

Изначально в файле [main.py](src/main.py) написан небольшой скрипт запуска эксперимента со значениями по умолчанию по трём коэффициентам решения.

### Примечание:
Все приведённые выше решатели и метрики имплементированы только для линейных однородных ДУ первого порядка с постоянным коэффициентами, но структура позволяет расширить их до любых ДУ.
